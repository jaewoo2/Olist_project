# Olist 커머스 데이터 전처리 통합 보고서 (Integrated Report)

본 보고서는 Olist 이커머스 데이터셋의 품질 향상과 분석 정합성을 위해 수행된 전체 전처리 과정을 총망라하여 기록합니다. 데이터 정제부터 최종 마스터 테이블 생성까지의 의사결정 과정과 기술적 기준을 사실 기반으로 정리하였습니다.

**최종 업데이트:** 2026-01-31  
**작성자:** Anti-Gravity (Data Analysis Expert)

---

## Ⅰ. 데이터 전처리 전략 및 철학

1. **실제 비즈니스 가치 중심**: "배송 완료(delivered)"된 주문만을 분석 핵심으로 삼아 지표의 신뢰성을 확보함.
2. **데이터 무결성(Integrity) 확보**: 논리적 오류(음수 배송 시간 등)와 시스템적 노이즈(중복 리뷰 등)를 제거함.
3. **분석 안정기(2017년~) 데이터 한정**: 플랫폼 운영 초기(2016년)의 불안정한 데이터를 배제하여 데이터의 안정성을 확보함.
4. **팀 표준화**: 전 팀원이 동일한 기준으로 분석할 수 있도록 검증된 '마스터 테이블' 배포를 목표로 함.

---

## Ⅱ. 테이블별 상세 정제 과정 (Clean Data Generation)

### 1. Products (상품)
- **결측치 처리**: `category_name` 등 결측치 610건을 `'unknown'` 및 `0`으로 대체. 수치형 데이터(무게 등)는 이상치 영향을 최소화하기 위해 **중앙값(Median)**으로 대체함.
- **검증**: 모든 등록 상품이 판매 이력을 가지고 있음을 확인하여 상품 사전을 확정함.

### 2. Orders (주문)
- **상태 필터링**: 전체의 97%인 `delivered` 주문만 유지. 배송 시간 계산이 불가능한 미완료 주문(shipped, canceled 등) 제거.
- **이상치 처리**: 실제 수령일이 주문일보다 빠른 경우(음수 시간) 등 논리적 오류 데이터 1,373건(1.4%)을 과감히 제거함.
- **날짜 변환**: 모든 시계열 분석을 위해 `object` 타입을 `datetime` 타입으로 표준화함.

### 3. Order Reviews (리뷰)
- **중복 리뷰 제거**: 동일 주문(`order_id`)에 대해 중복 생성된 리뷰 551건을 발견. 최신 생성일(`review_creation_date`) 기준 1건만 남겨 **1주문-1리뷰** 원칙을 수립함.
- **결측치 허용**: 텍스트 리뷰 미작성은 고객의 선택적 행동이므로 별도의 대체 없이 유지하여 분석에 활용함.

### 4. Order Payments (결제)
- **이율 수수료(Interest) 확인**: 상품가+배송비보다 결제 금액이 큰 경우, 브라질 특유의 카드 할부 수수료가 포함된 정상 거래임을 확인하여 데이터를 유지함.
- **다중 바우처**: 1개 주문에 최대 29회 분할 결제된 건이 존재하나, 이는 여러 장의 쿠폰(voucher) 사용으로 인한 정상 케이스임을 확인함.

---

## Ⅲ. 특성 공학 (Feature Engineering)

분석의 깊이를 더하기 위해 다음과 같은 파생 변수들을 생성하였습니다.

| 변수 그룹 | 변수명 | 설명 |
| :--- | :--- | :--- |
| **기간(Days)** | `total_delivery_time`, `seller_prep_time`, `pure_shipping_time` | 배송 프로세스별 소요 시간 산출 |
| **정확도** | `delivery_accuracy`, `is_delayed` | 예정일 대비 조기/지연 여부 및 지연 여부(Binary) |
| **속도 등급** | `delivery_speed_type` | IQR 기준 4단계(Very Fast, Normal, Slow, Very Slow) 분류 |
| **구매 패턴** | `purchase_hour`, `purchase_dayofweek`, `is_weekend` | 고객의 구매 시점 패턴 분석용 |

---

## Ⅳ. 마스터 테이블 생성 및 최종 필터링

### 1. 마스터 테이블 생성 로직
- **1:N 관계의 해소**: 아이템/결제 등 N의 관계를 주문 단위로 선집계(Aggregated)한 후 1:1 관계로 병합하여 데이터 뻥튀기(Explosion) 현상을 원천 차단함.

### 2. 2017년 이후 안정기 데이터 필터링 (v4 적용)
- **근거**: 2016년 데이터는 샘플 수가 적고 시스템이 불안정함.
- **결과**: **2017년 1월 1일 이후** 주문으로 한정하여 **94,819건**의 정제된 주문 데이터 확정.

### 3. 활동 판매자(Active Seller) 선별
- **기준**: 전체 판매자 중 2017년 이후 '배송 완료' 실적이 실질적으로 존재하는 판매자만 포함.
- **결과**: 미활동 판매자 136명을 제외한 **2,959명**의 진성 판매자 풀 구축.

---

## Ⅴ. 최종 산출물 데이터 스펙

### 1. master_orders_begin2017.csv
- **단위**: 1행 = 1주문
- **주요 특징**: 결제 정보 누락 1건을 제외한 모든 주문에 대해 배송 성과, 리뷰 정보, 고객 정보가 결합됨.

### 2. master_sellers_begin2017.csv
- **단위**: 1행 = 1판매자
- **주요 지표**: `total_gmv`, `avg_review_score`, `five_star_rate`, `delay_rate` 등 실무 핵심 KPI 포함.

---

## Ⅵ. 결론 및 제언

본 전처리 과정을 통해 확보된 데이터는 **통계적 유의성**과 **비즈니스적 타당성**을 동시에 갖추고 있습니다. 특히, 2017년 이후의 성공적인 배송 데이터를 기반으로 하고 있으므로, 향후 "판매자별 배송 품질 개선"이라는 목표를 달성하기 위한 가장 강력한 밑바탕이 될 것입니다.

---
**작성일:** 2026-01-31  
**문서 상태:** 최종 승인 (v4 통합본)
